name: dashkiosk-client-image-config
version: '0.1'
summary: Basic configuration for a dashkiosk appliance client
description: |
  This snap carries basic configuration for a dashkiosk based appliance
  client image.

grade: stable
confinement: strict

apps:
  setup:
    command: bin/setup.sh
    daemon: simple
    plugs:
      - network
      - network-bind
      - network-control
      - network-setup-control
      - hostname-control
      - avahi-observe
      - avahi-control
  set-timezone:
    command: bin/set-timezone
    daemon: simple
    plugs:
      - network
      - network-bind
      - timezone-control

parts:
  config:
    plugin: nil
    override-build: |
      mkdir -p $SNAPCRAFT_PART_INSTALL/bin
      cp -av setup.sh $SNAPCRAFT_PART_INSTALL/bin/
      cp -av set-timezone $SNAPCRAFT_PART_INSTALL/bin/
    stage-packages:
      - netcat-openbsd
      - avahi-utils
      - wget
